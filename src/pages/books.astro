---
import csvText from "../../public/data/goodreads_library_export.csv?raw";
import BookExplorer from "../components/BookExplorer";
import BaseLayout from "../layouts/BaseLayout.astro";
import { parseGoodreadsData } from "../scripts/books";

const pageTitle = "Books";
const pageDescription = "Noospheric indices";

// Curated favorites - always shown at top
const favoriteBooks = [
	{
		title: "Wanting",
		author: "Luke Burgis",
		amazonLink:
			"https://www.amazon.com/Wanting-Power-Mimetic-Desire-Everyday/dp/1250262488/",
	},
	{
		title: "Meditations (t. by Gregory Hays)",
		author: "Marcus Aurelius",
		amazonLink: "https://www.amazon.com/Meditations-Marcus-Aurelius/dp/0812968255/",
	},
	{
		title: "Thinking in Systems",
		author: "Donella H. Meadows",
		amazonLink:
			"https://www.amazon.com/Thinking-Systems-Donella-H-Meadows/dp/1603580557/",
	},
	{
		title: "The Evolving Self",
		author: "Robert Kegan",
		amazonLink:
			"https://www.amazon.com/Evolving-Self-Problem-Process-Development/dp/0674272315/",
	},
	{
		title: "Range",
		author: "David Epstein",
		amazonLink:
			"https://www.amazon.com/Range-Generalists-Triumph-Specialized-World/dp/0735214484/",
	},
	{
		title: "GÃ¶del, Escher, Bach",
		author: "Douglas Hofstadter",
		amazonLink: "https://a.co/d/4khX6GJ",
	},
	{
		title: "Siddhartha",
		author: "Hermann Hesse",
		amazonLink: "https://a.co/d/3P4MyJW",
	},
	{
		title: "The Creative Act",
		author: "Rick Rubin",
		amazonLink: "https://a.co/d/3P4MyJW",
	},
	{
		title: "The Upanishads",
		author: "Eknath Easwaran (translator)",
		amazonLink: "https://www.amazon.com/Upanishads-Easwarans-Classics-Indian-Spirituality/dp/1586380214/"
	},
];

// Parse Goodreads data (imported at build time)
const books = parseGoodreadsData(csvText);
---

<BaseLayout pageTitle={pageTitle}>
	<h1 class="text-4xl font-bold mb-4">{pageTitle}</h1>
	<p class="mb-8">{pageDescription}</p>

	<section class="mb-10">
		<h2 class="text-xl font-semibold mb-3 text-gray-700 dark:text-gray-300">
			Favorites
		</h2>
		<div class="flex flex-wrap gap-2">
			{
				favoriteBooks.map((book) => (
					<a
						href={book.amazonLink}
						target="_blank"
						rel="noopener noreferrer"
						class="px-3 py-1 text-sm rounded-full border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
						title={`by ${book.author}`}
					>
						{book.title}
					</a>
				))
			}
		</div>
	</section>

	<section>
		<h2 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300">
			Library
		</h2>
		<BookExplorer books={books} client:load />
	</section>
</BaseLayout>
