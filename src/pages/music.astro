---
import MusicExplorer from "../components/MusicExplorer";
import BaseLayout from "../layouts/BaseLayout.astro";
import type { SpotifyData } from "../lib/music";
import { parseSpotifyData } from "../lib/music";

const pageTitle = "Music";
const pageDescription = "Explore my musical universe";

// Curated favorites - energy vessels
const curated = [
	{ name: "Four Tet", url: "https://en.wikipedia.org/wiki/Four_Tet" },
	{ name: "Fred Again", url: "https://en.wikipedia.org/wiki/Fred_Again" },
	{ name: "Nils Frahm", url: "https://en.wikipedia.org/wiki/Nils_Frahm" },
	{ name: "Ólafur Arnalds", url: "https://en.wikipedia.org/wiki/%C3%93lafur_Arnalds" },
	{ name: "Max Cooper", url: "https://en.wikipedia.org/wiki/Max_Cooper_(musician)" },
	{ name: "Nicolas Jaar", url: "https://en.wikipedia.org/wiki/Nicolas_Jaar" },
	{ name: "Bon Iver", url: "https://en.wikipedia.org/wiki/Bon_Iver" },
	{ name: "Miles Davis", url: "https://en.wikipedia.org/wiki/Miles_Davis" },
	{ name: "Señor Loop", url: "https://en.wikipedia.org/wiki/Se%C3%B1or_Loop" },
	{ name: "Kendrick Lamar", url: "https://en.wikipedia.org/wiki/Kendrick_Lamar" },
];

// Load and transform Spotify data
const data: SpotifyData = await import("../../public/data/wtm.json");
const tracks = parseSpotifyData(data);
const playlistName = data.playlist.name;
---

<BaseLayout pageTitle={pageTitle}>
	<h1 class="text-4xl font-bold mb-4">{pageTitle}</h1>
	<p class="mb-8">{pageDescription}</p>

	<section class="mb-10">
		<h2 class="text-xl font-semibold mb-3 text-gray-700 dark:text-gray-300">Energy Vessels</h2>
		<div class="flex flex-wrap gap-2">
			{curated.map((artist) => (
				<a
					href={artist.url}
					target="_blank"
					rel="noopener noreferrer"
					class="px-3 py-1 text-sm rounded-full border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
				>
					{artist.name}
				</a>
			))}
		</div>
	</section>

	<section>
		<h2 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300">
			Playlist: <span class="italic font-normal">{playlistName}</span>
		</h2>
		<MusicExplorer tracks={tracks} playlistName={playlistName} client:load />
	</section>
</BaseLayout>
